<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 2 ãƒãƒ³ã‚ºã‚ªãƒ³: å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹ | pro-contents</title>
    <meta name="description" content="ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div id="outer">
        <header>
            <h1><a href="index.html">pro-contents</a></h1>
            <p class="description">ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„</p>
        </header>
        <div id="container">
            <aside>
                <div id="side-inner">
                    <div class="side-title">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ä¸€è¦§</div>
<div class="side"><ul>
<li><a href="tutorial01_é–‹ç™ºç’°å¢ƒã¨Webã®åŸºç¤å›ºã‚.html">Tutorial 1: é–‹ç™ºç’°å¢ƒã¨Webã®åŸºç¤å›ºã‚</a></li>
<li><a href="tutorial02_HTML_CSSåŸºç¤.html">Tutorial 2: HTML/CSSåŸºç¤</a></li>
<li><a href="tutorial03_Tailwind_CSSå¾¹åº•ç¿’å¾—.html">Tutorial 3: Tailwind CSSå¾¹åº•ç¿’å¾—</a></li>
<li><a href="tutorial04_JavaScript_åŸºç¤ã¨DOMæ“ä½œ.html">Tutorial 4: JavaScriptåŸºç¤ã¨DOMæ“ä½œ</a></li>
<li><a href="tutorial05_JavaScript_å¿œç”¨ã¨éåŒæœŸå‡¦ç†.html">Tutorial 5: JavaScriptå¿œç”¨ã¨éåŒæœŸå‡¦ç†</a></li>
<li><a href="tutorial06_TypeScriptå…¥é–€.html">Tutorial 6: TypeScriptå…¥é–€</a></li>
<li><a href="tutorial07_Reactå…¥é–€.html">Tutorial 7: Reactå…¥é–€</a></li>
<li><a href="tutorial08_Reactå¿œç”¨.html">Tutorial 8: Reactå¿œç”¨</a></li>
<li><a href="tutorial09_Next.js.html">Tutorial 9: Next.js</a></li>
<li><a href="tutorial10_Laravel_x_Next.js.html" class="current">Tutorial 10: Laravel Ã— Next.js</a></li>
<li><a href="tutorial11_ãƒ†ã‚¹ãƒˆ.html">Tutorial 11: ãƒ†ã‚¹ãƒˆ</a></li>
<li><a href="tutorial12_column.html">ä¸Šç´šã‚³ãƒ©ãƒ : Webãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ·±å±¤ç†è§£</a></li>
</ul></div>

                </div>
            </aside>
            <div id="content">
                <div class="inner">
                    <div class="breadcrumb"><a href="../index.html">ãƒ›ãƒ¼ãƒ </a><span>></span><a href="index.html">Laravelã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãŸã‚ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å­¦ç¿’ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</a><span>></span><a href="tutorial10_Laravel_x_Next.js.html">Tutorial 10: Laravel Ã— Next.js</a><span>></span><a href="tutorial10_Laravel_x_Next.js_chapter02_å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã®ä½œæˆ.html">Chapter 2: å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã®ä½œæˆ</a><span>></span>Chapter 2 ãƒãƒ³ã‚ºã‚ªãƒ³: å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹</div>
                    <div class="section-content">
<h1 id="10-2-4-chapter-2">10-2-4: å®Ÿè·µ ğŸš€ Chapter 2 ãƒãƒ³ã‚ºã‚ªãƒ³: å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’ä½œæˆã™ã‚‹</h1>
<h2 id="_1">ğŸ¯ ã“ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã®ç›®çš„</h2>
<p>ã“ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§å­¦ã‚“ã å†…å®¹ã‚’ç·å‹•å“¡ã—ã¦ã€Laravelãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã§APIã‚’ä½œæˆã—ã€Next.jsãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‹ã‚‰ãã®APIã‚’å‘¼ã³å‡ºã—ã¦å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã‚’å®Œæˆã•ã›ã¾ã™ã€‚CORSã‚¨ãƒ©ãƒ¼ã®è§£æ±ºã‹ã‚‰ã€å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã®UIã¸ã®åæ˜ ã¾ã§ã€ä¸€é€£ã®æµã‚Œã‚’è‡ªåˆ†ã®æ‰‹ã§ä½“é¨“ã—ã¾ã™ã€‚</p>
<h2 id="_2">ãƒãƒ³ã‚ºã‚ªãƒ³</h2>
<h3 id="1-laravel">ã‚¹ãƒ†ãƒƒãƒ—1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆLaravelï¼‰ã®æº–å‚™</h3>
<p><strong>æ³¨æ„</strong>: ã‚³ãƒãƒ³ãƒ‰ã¯ã™ã¹ã¦Laravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ<code>laravel-next-app</code>ï¼‰ã®ãƒ«ãƒ¼ãƒˆã§ã€<code>sail</code>ã‚’ä½¿ã£ã¦å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<ol>
<li>
<p><strong>ãƒ¢ãƒ‡ãƒ«ã¨ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®ä½œæˆ</strong><br />
<code>bash
    sail artisan make:model Product -m</code></p>
</li>
<li>
<p><strong>ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†</strong></p>
<ul>
<li><code>database/migrations/..._create_products_table.php</code>ã‚’é–‹ãã€<code>up</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ç·¨é›†ã—ã¾ã™ã€‚<br />
<code>php
    public function up(): void
    {
        Schema::create("products", function (Blueprint $table) {
            $table-&gt;id();
            $table-&gt;string("name");
            $table-&gt;text("description");
            $table-&gt;integer("price");
            $table-&gt;timestamps();
        });
    }</code></li>
</ul>
</li>
<li>
<p><strong>ã‚·ãƒ¼ãƒ€ãƒ¼ã®ä½œæˆã¨ç·¨é›†</strong></p>
<ul>
<li>ã‚·ãƒ¼ãƒ€ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚<br />
<code>bash
    sail artisan make:seeder ProductSeeder</code></li>
<li>
<p><code>database/seeders/ProductSeeder.php</code>ã®<code>run</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç·¨é›†ã—ã¾ã™ã€‚<br />
    ```php<br />
    use App\Models\Product;</p>
<p>public function run(): void<br />
{<br />
    Product::factory()-&gt;count(10)-&gt;create();<br />
}<br />
<code>-   `database/seeders/DatabaseSeeder.php`ã§`ProductSeeder`ã‚’å‘¼ã³å‡ºã—ã¾ã™ã€‚</code>php<br />
public function run(): void<br />
{<br />
    $this-&gt;call([ProductSeeder::class]);<br />
}<br />
```</p>
</li>
</ul>
</li>
<li>
<p><strong>ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚·ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°</strong><br />
<code>bash
    sail artisan migrate:fresh --seed</code></p>
</li>
<li>
<p><strong>ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã¨ãƒ«ãƒ¼ãƒˆã®ä½œæˆ</strong></p>
<ul>
<li>APIã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’ä½œæˆã—ã¾ã™ã€‚<br />
<code>bash
    sail artisan make:controller ProductController --api</code></li>
<li>
<p><code>app/Http/Controllers/ProductController.php</code>ã®<code>index</code>ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç·¨é›†ã—ã¾ã™ã€‚<br />
    ```php<br />
    use App\Models\Product;</p>
<p>public function index()<br />
{<br />
    return response()-&gt;json(Product::all());<br />
}<br />
<code>-   `routes/api.php`ã«ãƒ«ãƒ¼ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚</code>php<br />
use App\Http\Controllers\ProductController;</p>
<p>Route::get("/products", [ProductController::class, "index"]);<br />
```</p>
</li>
</ul>
</li>
<li>
<p><strong>CORSè¨­å®š</strong></p>
<ul>
<li>Laravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®<code>.env</code>ãƒ•ã‚¡ã‚¤ãƒ«ã«ã€Next.jsã®URLã‚’è¿½è¨˜ã—ã¾ã™ã€‚<br />
<code>.env
    # .env
    CORS_ALLOWED_ORIGINS=http://localhost:3000</code></li>
<li>è¨­å®šã‚’åæ˜ ã•ã›ã‚‹ãŸã‚ã«Sailã‚’å†èµ·å‹•ã—ã¾ã™ã€‚<br />
<code>bash
    sail down
    sail up -d</code></li>
</ul>
</li>
<li>
<p><strong>APIå‹•ä½œç¢ºèª</strong></p>
<ul>
<li>ãƒ–ãƒ©ã‚¦ã‚¶ã§<code>http://localhost/api/products</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã€JSONãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</li>
</ul>
</li>
</ol>
<h3 id="2-nextjs">ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆNext.jsï¼‰ã®å®Ÿè£…</h3>
<p><strong>æ³¨æ„</strong>: ä½œæ¥­ã¯Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆï¼ˆ<code>next-frontend-app</code>ï¼‰ã§è¡Œã„ã¾ã™ã€‚</p>
<ol>
<li>
<p><strong>ç’°å¢ƒå¤‰æ•°ã®è¨­å®š</strong></p>
<ul>
<li>Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ«ãƒ¼ãƒˆã«<code>.env.local</code>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã‚’è¨˜è¿°ã—ã¾ã™ã€‚<br />
<code>.env
    # .env.local
    NEXT_PUBLIC_API_BASE_URL=http://localhost/api</code></li>
<li>Next.jsã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’å†èµ·å‹•ã—ã¾ã™ï¼ˆ<code>Ctrl+C</code>ã§åœæ­¢å¾Œã€<code>npm run dev</code>ï¼‰ã€‚</li>
</ul>
</li>
<li>
<p><strong>å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã®ä½œæˆ</strong></p>
<ul>
<li>
<p><code>src/app/products/page.tsx</code>ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è²¼ã‚Šä»˜ã‘ã¾ã™ã€‚</p>
<p>```tsx<br />
// src/app/products/page.tsx</p>
<p>interface Product {<br />
  id: number;<br />
  name: string;<br />
  description: string;<br />
  price: number;<br />
  created_at: string;<br />
  updated_at: string;<br />
}</p>
<p>async function getProducts(): Promise<Product[]> {<br />
  const url = <code>${process.env.NEXT_PUBLIC_API_BASE_URL}/products</code>;<br />
  const res = await fetch(url, { cache: "no-store" });<br />
  if (!res.ok) {<br />
    throw new Error("Failed to fetch products");<br />
  }<br />
  return res.json();<br />
}</p>
<p>function ProductCard({ product }: { product: Product }) {<br />
  return (<br />
    <div className="border rounded-lg p-6 shadow-md bg-white"><br />
      <h2 className="text-2xl font-semibold mb-2">{product.name}</h2><br />
      <p className="text-gray-600 mb-4">{product.description}</p><br />
      <p className="text-xl font-bold text-right text-gray-800"><br />
        &yen;{product.price.toLocaleString()}<br />
      </p><br />
    </div><br />
  );<br />
}</p>
<p>export default async function ProductsPage() {<br />
  const products = await getProducts();</p>
<p>return (<br />
    <main className="container mx-auto p-8 bg-gray-50 min-h-screen"><br />
      <h1 className="text-4xl font-bold mb-10 text-center text-gray-800"><br />
        å•†å“ä¸€è¦§<br />
      </h1><br />
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8"><br />
        {products.map((product) =&gt; (<br />
          <ProductCard key={product.id} product={product} /><br />
        ))}<br />
      </div><br />
    </main><br />
  );<br />
}<br />
```</p>
</li>
</ul>
</li>
<li>
<p><strong>æœ€çµ‚ç¢ºèª</strong></p>
<ul>
<li>ãƒ–ãƒ©ã‚¦ã‚¶ã§<code>http://localhost:3000/products</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚</li>
<li>Laravelã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‹ã‚‰å–å¾—ã—ãŸå•†å“ãƒ‡ãƒ¼ã‚¿ãŒã€ã‚«ãƒ¼ãƒ‰å½¢å¼ã§ç¶ºéº—ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã‚Œã°ã€ã“ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã¯æˆåŠŸã§ã™ï¼</li>
</ul>
</li>
</ol>
<h2 id="_3">âœ¨ ã¾ã¨ã‚</h2>
<p>ãŠç–²ã‚Œæ§˜ã§ã—ãŸï¼ã“ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã‚’é€šã—ã¦ã€ä»¥ä¸‹ã®ã“ã¨ãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã—ãŸã€‚</p>
<ul>
<li>Laravelã§åŸºæœ¬çš„ãªJSON APIã‚’æ§‹ç¯‰ã™ã‚‹</li>
<li>Next.jsã®Server Componentã‹ã‚‰APIã‚’å‘¼ã³å‡ºã™</li>
<li>CORSã‚¨ãƒ©ãƒ¼ã‚’è§£æ±ºã™ã‚‹</li>
<li>å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’Reactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦ç”»é¢ã«è¡¨ç¤ºã™ã‚‹</li>
</ul>
<p>ã“ã‚Œã¯ã€Laravel + Next.jsã«ã‚ˆã‚‹ãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºã®æœ€ã‚‚åŸºæœ¬çš„ãªã€ã—ã‹ã—æœ€ã‚‚é‡è¦ãªæµã‚Œã§ã™ã€‚ã“ã®æµã‚Œã‚’ãƒã‚¹ã‚¿ãƒ¼ã™ã‚Œã°ã€ã‚ã¨ã¯APIã®æ©Ÿèƒ½ã‚’æ‹¡å¼µã—ãŸã‚Šã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®UIã‚’ãƒªãƒƒãƒã«ã—ãŸã‚Šã¨ã€æ§˜ã€…ãªå¿œç”¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚</p>
<p>æ¬¡ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§ã¯ã€ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã¨ã„ã£ãŸã€Œèªè¨¼æ©Ÿèƒ½ã€ã‚’å®Ÿè£…ã—ã¦ã„ãã¾ã™ã€‚</p>
</div>
<div class="section-nav">
<a href="tutorial10_Laravel_x_Next.js_chapter02_å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ã®ä½œæˆ_10-2-3: å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹.html" class="prev">å–å¾—ã—ãŸãƒ‡ãƒ¼ã‚¿ã‚’è¡¨ç¤ºã™ã‚‹</a>
<span></span>
</div>

                </div>
            </div>
        </div>
        <footer>
            &copy; 2025 pro-contents
        </footer>
    </div>
</body>
</html>
