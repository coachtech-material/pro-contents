<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½ã®å®Ÿè£… | pro-contents</title>
    <meta name="description" content="Proç”Ÿç”¨ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div id="outer">
        <header>
            <h1><a href="index.html">pro-contents</a></h1>
            <p class="description">Proç”Ÿç”¨ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„</p>
        </header>
        <div id="container">
            <aside>
                <div id="side-inner">
                    <div class="side-title">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ä¸€è¦§</div>
<div class="side"><ul>
<li><a href="tutorial01_é–‹ç™ºç’°å¢ƒã¨Webã®åŸºç¤å›ºã‚.html">Tutorial 1: é–‹ç™ºç’°å¢ƒã¨Webã®åŸºç¤å›ºã‚</a></li>
<li><a href="tutorial02_HTML_CSSåŸºç¤.html">Tutorial 2: HTML/CSSåŸºç¤</a></li>
<li><a href="tutorial03_Tailwind_CSSå¾¹åº•ç¿’å¾—.html">Tutorial 3: Tailwind CSSå¾¹åº•ç¿’å¾—</a></li>
<li><a href="tutorial04_JavaScript_åŸºç¤ã¨DOMæ“ä½œ.html">Tutorial 4: JavaScriptåŸºç¤ã¨DOMæ“ä½œ</a></li>
<li><a href="tutorial05_JavaScript_å¿œç”¨ã¨éåŒæœŸå‡¦ç†.html">Tutorial 5: JavaScriptå¿œç”¨ã¨éåŒæœŸå‡¦ç†</a></li>
<li><a href="tutorial06_TypeScriptå…¥é–€.html">Tutorial 6: TypeScriptå…¥é–€</a></li>
<li><a href="tutorial07_Reactå…¥é–€.html">Tutorial 7: Reactå…¥é–€</a></li>
<li><a href="tutorial08_Reactå¿œç”¨.html">Tutorial 8: Reactå¿œç”¨</a></li>
<li><a href="tutorial09_Next.js.html">Tutorial 9: Next.js</a></li>
<li><a href="tutorial10_Laravel_x_Next.js.html" class="current">Tutorial 10: Laravel Ã— Next.js</a></li>
<li><a href="tutorial11_ãƒ†ã‚¹ãƒˆ.html">Tutorial 11: ãƒ†ã‚¹ãƒˆ</a></li>
<li><a href="tutorial12_column.html">ä¸Šç´šã‚³ãƒ©ãƒ : Webãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ·±å±¤ç†è§£</a></li>
</ul></div>

                </div>
            </aside>
            <div id="content">
                <div class="inner">
                    <div class="breadcrumb"><a href="../index.html">ãƒ›ãƒ¼ãƒ </a><span>></span><a href="index.html">Laravelã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãŸã‚ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å­¦ç¿’ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</a><span>></span><a href="tutorial10_Laravel_x_Next.js.html">Tutorial 10: Laravel Ã— Next.js</a><span>></span><a href="tutorial10_Laravel_x_Next.js_chapter03_èªè¨¼æ©Ÿèƒ½ã®å®Ÿè£….html">Chapter 3: èªè¨¼æ©Ÿèƒ½ã®å®Ÿè£…</a><span>></span>ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…</div>
                    <div class="section-content">
<h1 id="10-3-3">10-3-3: ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆæ©Ÿèƒ½ã®å®Ÿè£…</h1>
<h2 id="_1">ğŸ¯ ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§å­¦ã¶ã“ã¨</h2>
<ul>
<li>Laravelå´ã«ã€ãƒ­ã‚°ã‚¤ãƒ³ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ã®ãŸã‚ã®APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’å­¦ã¶</li>
<li>Next.jsã§ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã™ã‚‹æ–¹æ³•ã‚’ç¿’å¾—ã™ã‚‹</li>
<li>NextAuth.jsã®<code>signIn</code>, <code>signOut</code>é–¢æ•°ã‚’ä½¿ã£ã¦ã€å®Ÿéš›ã«ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã‚’å®Ÿè¡Œã™ã‚‹æ–¹æ³•ã‚’å­¦ã¶</li>
<li><code>useSession</code>ãƒ•ãƒƒã‚¯ã‚’ä½¿ã£ã¦ã€èªè¨¼çŠ¶æ…‹ã«å¿œã˜ã¦UIã‚’å‹•çš„ã«å¤‰æ›´ã™ã‚‹æ–¹æ³•ã‚’ç†è§£ã™ã‚‹</li>
</ul>
<h2 id="_2">å°å…¥</h2>
<p>ã“ã‚Œã¾ã§ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã€ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆSanctumï¼‰ã¨ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆNextAuth.jsï¼‰ã®èªè¨¼è¨­å®šãŒå®Œäº†ã—ã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã‚Œã‚‰ã¯ã¾ã é€£æºã—ã¦ãŠã‚‰ãšã€å®Ÿéš›ã«ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ“ä½œã§ãã‚‹UIã‚‚ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
<p>ã“ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã§ã¯ã€ã„ã‚ˆã„ã‚ˆä¸¡è€…ã‚’çµã³ã¤ã‘ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå®Ÿéš›ã«ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã§ãã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã€‚å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã®ä½œæ¥­ã‚’è¡Œã„ã¾ã™ã€‚</p>
<ol>
<li><strong>Laravel</strong>: NextAuth.jsãŒè¦æ±‚ã™ã‚‹ãƒ­ã‚°ã‚¤ãƒ³ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±å–å¾—ã®APIã‚’ä½œæˆã—ã¾ã™ã€‚</li>
<li><strong>Next.js</strong>: ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œæˆã—ã€NextAuth.jsã®é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦Laravelã®APIã¨é€šä¿¡ã—ã¾ã™ã€‚ã¾ãŸã€èªè¨¼çŠ¶æ…‹ã‚’è¡¨ç¤ºã™ã‚‹UIã‚‚ä½œæˆã—ã¾ã™ã€‚</li>
</ol>
<h2 id="_3">è©³ç´°è§£èª¬</h2>
<h3 id="1-laravel">ãƒ‘ãƒ¼ãƒˆ1: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ï¼ˆLaravelï¼‰ã®å®Ÿè£…</h3>
<p><strong>æ³¨æ„</strong>: ã“ã®ãƒ‘ãƒ¼ãƒˆã®ä½œæ¥­ã¯ã€ã™ã¹ã¦Laravelãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ<code>laravel-next-app</code>ï¼‰ã§è¡Œã„ã¾ã™ã€‚</p>
<h4 id="1">ã‚¹ãƒ†ãƒƒãƒ—1: èªè¨¼ãƒ«ãƒ¼ãƒˆã®æœ‰åŠ¹åŒ–</h4>
<p>Laravelã¯ã€<code>laravel/ui</code>ã‚„<code>laravel/breeze</code>ã¨ã„ã£ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å°å…¥ã™ã‚‹ã“ã¨ã§ã€èªè¨¼é–¢é€£ã®ãƒ«ãƒ¼ãƒˆã‚„ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’è‡ªå‹•ã§ç”Ÿæˆã—ã¦ãã‚Œã¾ã™ã€‚ä»Šå›ã¯ã€APIã«å¿…è¦ãªãƒ«ãƒ¼ãƒˆã ã‘ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«è¿½åŠ ã—ã¾ã™ã€‚</p>
<p><code>routes/api.php</code>ã«ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚</p>
<pre class="codehilite"><code class="language-php">// routes/api.php

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Route;
use App\Http\Controllers\ProductController;

// å•†å“ä¸€è¦§APIï¼ˆå¤‰æ›´ãªã—ï¼‰
Route::get(&quot;/products&quot;, [ProductController::class, &quot;index&quot;]);

// èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ãªãƒ«ãƒ¼ãƒˆ
Route::middleware(&quot;auth:sanctum&quot;)-&gt;get(&quot;/user&quot;, function (Request $request) {
    return $request-&gt;user();
});
</code></pre>

<p>æ¬¡ã«ã€<code>routes/web.php</code>ã«ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã®ãƒ«ãƒ¼ãƒˆã‚’è¿½åŠ ã—ã¾ã™ã€‚SPAèªè¨¼ã§ã¯ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’é–‹å§‹ãƒ»ç ´æ£„ã™ã‚‹ãŸã‚ã«ã€ã“ã‚Œã‚‰ã®ãƒ«ãƒ¼ãƒˆã¯<code>web</code>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆCSRFä¿è­·ãªã©ã‚’å«ã‚€ï¼‰å†…ã«å®šç¾©ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚</p>
<pre class="codehilite"><code class="language-php">// routes/web.php

use Illuminate\Http\Request;
use Illuminate\Support\Facades\Auth;
use Illuminate\Support\Facades\Route;

// ...

// ãƒ­ã‚°ã‚¤ãƒ³
Route::post(&quot;/login&quot;, function (Request $request) {
    $credentials = $request-&gt;validate([
        &quot;email&quot; =&gt; [&quot;required&quot;, &quot;email&quot;],
        &quot;password&quot; =&gt; [&quot;required&quot;],
    ]);

    if (Auth::attempt($credentials)) {
        $request-&gt;session()-&gt;regenerate();

        return response()-&gt;json(Auth::user());
    }

    return response()-&gt;json([
        &quot;message&quot; =&gt; &quot;The provided credentials do not match our records.&quot;,
    ], 401);
});

// ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
Route::post(&quot;/logout&quot;, function (Request $request) {
    Auth::guard(&quot;web&quot;)-&gt;logout();

    $request-&gt;session()-&gt;invalidate();

    $request-&gt;session()-&gt;regenerateToken();

    return response()-&gt;noContent();
});
</code></pre>

<p><strong>ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ³ãƒˆ:</strong></p>
<ul>
<li><strong><code>/api/user</code></strong>: <code>auth:sanctum</code>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã§ä¿è­·ã•ã‚Œã¦ã„ã¾ã™ã€‚ã“ã‚Œã«ã‚ˆã‚Šã€æœ‰åŠ¹ãªã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’æŒã¤ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼ˆèªè¨¼æ¸ˆã¿ãƒªã‚¯ã‚¨ã‚¹ãƒˆï¼‰ã ã‘ãŒã“ã®ãƒ«ãƒ¼ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã€èªè¨¼æ¸ˆã¿ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«ã‚’å–å¾—ã§ãã¾ã™ã€‚NextAuth.jsã®<code>authorize</code>ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã§ã€ãƒ­ã‚°ã‚¤ãƒ³ç›´å¾Œã«ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã‚’å©ã„ã¦ã„ã¾ã—ãŸã­ã€‚</li>
<li><strong><code>/login</code></strong>: <code>Auth::attempt</code>ãƒ•ã‚¡ã‚µãƒ¼ãƒ‰ã‚’ä½¿ã£ã¦ã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§é€ã‚‰ã‚Œã¦ããŸãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã§èªè¨¼ã‚’è©¦ã¿ã¾ã™ã€‚æˆåŠŸã™ã‚Œã°ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’å†ç”Ÿæˆï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£å¯¾ç­–ï¼‰ã—ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’JSONã§è¿”ã—ã¾ã™ã€‚</li>
<li><strong><code>/logout</code></strong>: <code>Auth::guard('web')-&gt;logout()</code>ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‹ã‚‰ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’å‰Šé™¤ã—ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ç„¡åŠ¹åŒ–ãƒ»å†ç”Ÿæˆã—ã¦ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã‚’å®Œäº†ã•ã›ã¾ã™ã€‚</li>
</ul>
<h4 id="2">ã‚¹ãƒ†ãƒƒãƒ—2: ãƒ†ã‚¹ãƒˆç”¨ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ</h4>
<p>ãƒ­ã‚°ã‚¤ãƒ³æ©Ÿèƒ½ã‚’è©¦ã™ãŸã‚ã«ã€ãƒ†ã‚¹ãƒˆç”¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¿…è¦ã§ã™ã€‚<code>tinker</code>ã‚’ä½¿ã£ã¦ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>
<pre class="codehilite"><code class="language-bash">sail artisan tinker
</code></pre>

<p><code>tinker</code>ã®å¯¾è©±ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã€ä»¥ä¸‹ã®PHPã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚</p>
<pre class="codehilite"><code class="language-php">// tinker

\App\Models\User::create([
    'name' =&gt; 'Test User',
    'email' =&gt; 'test@example.com',
    'password' =&gt; bcrypt('password'),
]);
</code></pre>

<p>ã“ã‚Œã§ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ <code>test@example.com</code>ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ <code>password</code> ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä½œæˆã•ã‚Œã¾ã—ãŸã€‚</p>
<h3 id="2-nextjs">ãƒ‘ãƒ¼ãƒˆ2: ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ï¼ˆNext.jsï¼‰ã®å®Ÿè£…</h3>
<p><strong>æ³¨æ„</strong>: ã“ã®ãƒ‘ãƒ¼ãƒˆã®ä½œæ¥­ã¯ã€ã™ã¹ã¦Next.jsãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªï¼ˆ<code>next-frontend-app</code>ï¼‰ã§è¡Œã„ã¾ã™ã€‚</p>
<h4 id="1_1">ã‚¹ãƒ†ãƒƒãƒ—1: ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã®ä½œæˆ</h4>
<p>NextAuth.jsã®è¨­å®šã§ <code>pages: { signIn: '/login' }</code> ã¨æŒ‡å®šã—ãŸã®ã§ã€<code>src/app/login/page.tsx</code>ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<pre class="codehilite"><code class="language-tsx">// src/app/login/page.tsx
&quot;use client&quot;;

import { useState } from &quot;react&quot;;
import { signIn } from &quot;next-auth/react&quot;;
import { useRouter } from &quot;next/navigation&quot;;

export default function LoginPage() {
  const [email, setEmail] = useState(&quot;&quot;);
  const [password, setPassword] = useState(&quot;&quot;);
  const [error, setError] = useState(&quot;&quot;);
  const router = useRouter();

  const handleSubmit = async (e: React.FormEvent) =&gt; {
    e.preventDefault();
    setError(&quot;&quot;);

    const result = await signIn(&quot;credentials&quot;, {
      redirect: false, // èªè¨¼å¾Œã®è‡ªå‹•ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã‚’ç„¡åŠ¹åŒ–
      email,
      password,
    });

    if (result?.error) {
      setError(&quot;ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã¾ãŸã¯ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“ã€‚&quot;);
    } else if (result?.ok) {
      router.push(&quot;/&quot;); // èªè¨¼æˆåŠŸå¾Œã«ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ
    }
  };

  return (
    &lt;div className=&quot;flex items-center justify-center min-h-screen bg-gray-100&quot;&gt;
      &lt;div className=&quot;w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md&quot;&gt;
        &lt;h1 className=&quot;text-2xl font-bold text-center&quot;&gt;ãƒ­ã‚°ã‚¤ãƒ³&lt;/h1&gt;
        &lt;form onSubmit={handleSubmit} className=&quot;space-y-6&quot;&gt;
          &lt;div&gt;
            &lt;label
              htmlFor=&quot;email&quot;
              className=&quot;block text-sm font-medium text-gray-700&quot;
            &gt;
              ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹
            &lt;/label&gt;
            &lt;input
              id=&quot;email&quot;
              type=&quot;email&quot;
              value={email}
              onChange={(e) =&gt; setEmail(e.target.value)}
              required
              className=&quot;w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500&quot;
            /&gt;
          &lt;/div&gt;
          &lt;div&gt;
            &lt;label
              htmlFor=&quot;password&quot;
              className=&quot;block text-sm font-medium text-gray-700&quot;
            &gt;
              ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰
            &lt;/label&gt;
            &lt;input
              id=&quot;password&quot;
              type=&quot;password&quot;
              value={password}
              onChange={(e) =&gt; setPassword(e.target.value)}
              required
              className=&quot;w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500&quot;
            /&gt;
          &lt;/div&gt;
          {error &amp;&amp; &lt;p className=&quot;text-sm text-red-600&quot;&gt;{error}&lt;/p&gt;}
          &lt;div&gt;
            &lt;button
              type=&quot;submit&quot;
              className=&quot;w-full px-4 py-2 font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500&quot;
            &gt;
              ãƒ­ã‚°ã‚¤ãƒ³
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/form&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
}
</code></pre>

<p><strong>ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ³ãƒˆ:</strong></p>
<ul>
<li><strong><code>"use client"</code></strong>: ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ã®çŠ¶æ…‹ç®¡ç†ï¼ˆ<code>useState</code>ï¼‰ã‚„ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆ<code>onSubmit</code>ï¼‰ãªã©ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚µã‚¤ãƒ‰ã®ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ãŒå¿…è¦ãªãŸã‚ã€Client Componentã¨ã—ã¦å®šç¾©ã—ã¾ã™ã€‚</li>
<li><strong><code>signIn("credentials", ...)</code></strong>: NextAuth.jsãŒæä¾›ã™ã‚‹<code>signIn</code>é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦ã„ã¾ã™ã€‚ç¬¬ä¸€å¼•æ•°ã«<code>providers</code>ã§è¨­å®šã—ãŸèªè¨¼æ–¹æ³•ï¼ˆä»Šå›ã¯<code>credentials</code>ï¼‰ã‚’æŒ‡å®šã—ã€ç¬¬äºŒå¼•æ•°ã«ãƒ•ã‚©ãƒ¼ãƒ ã®å…¥åŠ›å€¤ã¨ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¸¡ã—ã¾ã™ã€‚</li>
<li><strong><code>redirect: false</code></strong>: <code>signIn</code>ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æŒ™å‹•ã¯ã€èªè¨¼å¾Œã«è‡ªå‹•ã§å…ƒã®ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã™ã‚‹ã¨ã„ã†ã‚‚ã®ã§ã™ã€‚ã“ã“ã§ã¯<code>false</code>ã«è¨­å®šã—ã€èªè¨¼çµæœï¼ˆæˆåŠŸã‹å¤±æ•—ã‹ï¼‰ã‚’<code>result</code>ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨ã—ã¦å—ã‘å–ã‚Šã€æ‰‹å‹•ã§ç”»é¢é·ç§»ã‚„ã‚¨ãƒ©ãƒ¼è¡¨ç¤ºã‚’åˆ¶å¾¡ã—ã¦ã„ã¾ã™ã€‚</li>
</ul>
<h4 id="2_1">ã‚¹ãƒ†ãƒƒãƒ—2: èªè¨¼çŠ¶æ…‹ã‚’è¡¨ç¤ºã™ã‚‹ãƒ˜ãƒƒãƒ€ãƒ¼ã®ä½œæˆ</h4>
<p>ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã‹ã©ã†ã‹ã€èª°ãŒãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ã„ã‚‹ã‹ã‚’è¡¨ç¤ºã—ã€ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆã®ãƒªãƒ³ã‚¯ã‚’æä¾›ã™ã‚‹ãŸã‚ã®ãƒ˜ãƒƒãƒ€ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<p><code>src/app/components/Header.tsx</code>ã¨ã„ã†æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<pre class="codehilite"><code class="language-tsx">// src/app/components/Header.tsx
&quot;use client&quot;;

import { useSession, signOut } from &quot;next-auth/react&quot;;
import Link from &quot;next/link&quot;;

export default function Header() {
  const { data: session, status } = useSession();

  return (
    &lt;header className=&quot;bg-white shadow-md&quot;&gt;
      &lt;nav className=&quot;container mx-auto px-6 py-4 flex justify-between items-center&quot;&gt;
        &lt;Link href=&quot;/&quot; className=&quot;text-xl font-bold text-gray-800&quot;&gt;
          MyApp
        &lt;/Link&gt;
        &lt;div&gt;
          {status === &quot;loading&quot; ? (
            &lt;p&gt;Loading...&lt;/p&gt;
          ) : session ? (
            &lt;div className=&quot;flex items-center space-x-4&quot;&gt;
              &lt;p&gt;ã‚ˆã†ã“ã, {session.user?.name}ã•ã‚“&lt;/p&gt;
              &lt;button
                onClick={() =&gt; signOut({ callbackUrl: &quot;/login&quot; })}
                className=&quot;px-4 py-2 font-medium text-white bg-red-600 rounded-md hover:bg-red-700&quot;
              &gt;
                ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
              &lt;/button&gt;
            &lt;/div&gt;
          ) : (
            &lt;Link
              href=&quot;/login&quot;
              className=&quot;px-4 py-2 font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700&quot;
            &gt;
              ãƒ­ã‚°ã‚¤ãƒ³
            &lt;/Link&gt;
          )}
        &lt;/div&gt;
      &lt;/nav&gt;
    &lt;/header&gt;
  );
}
</code></pre>

<p><strong>ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ³ãƒˆ:</strong></p>
<ul>
<li><strong><code>useSession()</code></strong>: NextAuth.jsãŒæä¾›ã™ã‚‹æœ€ã‚‚é‡è¦ãªãƒ•ãƒƒã‚¯ã§ã™ã€‚èªè¨¼çŠ¶æ…‹ï¼ˆ<code>status</code>ï¼‰ã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿ï¼ˆ<code>data</code>ï¼‰ã‚’å–å¾—ã—ã¾ã™ã€‚<ul>
<li><code>status</code>: <code>"loading"</code> | <code>"authenticated"</code> | <code>"unauthenticated"</code> ã®ã„ãšã‚Œã‹ã®æ–‡å­—åˆ—ã€‚</li>
<li><code>data</code>: èªè¨¼ã•ã‚Œã¦ã„ã‚‹å ´åˆã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã•ã‚Œã¦ã„ãªã„å ´åˆã¯<code>null</code>ã€‚</li>
</ul>
</li>
<li><strong>çŠ¶æ…‹ã«å¿œã˜ãŸUIã®åˆ†å²</strong>: <code>status</code>ã¨<code>session</code>ã®å€¤ã«å¿œã˜ã¦ã€ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤ºã€ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’å‡ºã—åˆ†ã‘ã¦ã„ã¾ã™ã€‚</li>
<li><strong><code>signOut()</code></strong>: ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã‚’å®Ÿè¡Œã—ã¾ã™ã€‚<code>callbackUrl</code>ã‚’æŒ‡å®šã™ã‚‹ã¨ã€ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå¾Œã«ãã®URLã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã¾ã™ã€‚</li>
</ul>
<h4 id="3">ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«ãƒ˜ãƒƒãƒ€ãƒ¼ã‚’è¿½åŠ </h4>
<p>ä½œæˆã—ãŸ<code>Header</code>ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ã€<code>src/app/layout.tsx</code>ã§è¡¨ç¤ºã™ã‚‹ã‚ˆã†ã«ã—ã¾ã™ã€‚</p>
<pre class="codehilite"><code class="language-tsx">// src/app/layout.tsx

// ... (importãªã©ã¯å¤‰æ›´ãªã—)
import Header from &quot;./components/Header&quot;; // Headerã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

// ...

export default function RootLayout({
  children,
}: Readonly&lt;{
  children: React.ReactNode;
}&gt;) {
  return (
    &lt;html lang=&quot;en&quot;&gt;
      &lt;body className={inter.className}&gt;
        &lt;Providers&gt;
          &lt;Header /&gt; {/* Headerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’è¿½åŠ  */}
          {children}
        &lt;/Providers&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  );
}
</code></pre>

<h3 id="3_1">ãƒ‘ãƒ¼ãƒˆ3: å‹•ä½œç¢ºèª</h3>
<p>ã™ã¹ã¦ã®å®Ÿè£…ãŒå®Œäº†ã—ã¾ã—ãŸã€‚å®Ÿéš›ã«å‹•ä½œã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<ol>
<li>Next.jsã®é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ãŒèµ·å‹•ã—ã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€<code>http://localhost:3000</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¾ã™ã€‚ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã€Œãƒ­ã‚°ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚</li>
<li>ã€Œãƒ­ã‚°ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã€<code>/login</code>ãƒšãƒ¼ã‚¸ã«é·ç§»ã—ã¾ã™ã€‚</li>
<li>ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã«<code>test@example.com</code>ã€ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã«<code>password</code>ã¨å…¥åŠ›ã—ã¦ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ã¾ã™ã€‚</li>
<li>æˆåŠŸã™ã‚‹ã¨ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã€ãƒ˜ãƒƒãƒ€ãƒ¼ãŒã€Œã‚ˆã†ã“ã, Test Userã•ã‚“ã€ã¨ã€Œãƒ­ã‚°ã‚¢ã‚¦ãƒˆã€ãƒœã‚¿ãƒ³ã«å¤‰ã‚ã‚Šã¾ã™ã€‚</li>
<li>å•†å“ä¸€è¦§ãƒšãƒ¼ã‚¸ï¼ˆ<code>/products</code>ï¼‰ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‚ã€ãƒ­ã‚°ã‚¤ãƒ³çŠ¶æ…‹ãŒç¶­æŒã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¾ã™ã€‚</li>
<li>ã€Œãƒ­ã‚°ã‚¢ã‚¦ãƒˆã€ãƒœã‚¿ãƒ³ã‚’æŠ¼ã™ã¨ã€ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ã«ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã•ã‚Œã€ãƒ˜ãƒƒãƒ€ãƒ¼ãŒå†ã³ã€Œãƒ­ã‚°ã‚¤ãƒ³ã€ãƒœã‚¿ãƒ³ã«æˆ»ã‚Šã¾ã™ã€‚</li>
</ol>
<h2 id="_4">âœ¨ ã¾ã¨ã‚</h2>
<ul>
<li>Laravelå´ã§ã€<code>web</code>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚°ãƒ«ãƒ¼ãƒ—å†…ã«ãƒ­ã‚°ã‚¤ãƒ³ãƒ»ãƒ­ã‚°ã‚¢ã‚¦ãƒˆç”¨ã®ãƒ«ãƒ¼ãƒˆã‚’ã€<code>api</code>ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã‚°ãƒ«ãƒ¼ãƒ—å†…ã«èªè¨¼æ¸ˆã¿ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’è¿”ã™ãƒ«ãƒ¼ãƒˆã‚’å®šç¾©ã—ãŸã€‚</li>
<li>Next.jsã§ãƒ­ã‚°ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ ã‚’ä½œæˆã—ã€<code>signIn("credentials", ...)</code>é–¢æ•°ã‚’å‘¼ã³å‡ºã—ã¦èªè¨¼å‡¦ç†ã‚’å®Ÿè¡Œã—ãŸã€‚</li>
<li><code>useSession</code>ãƒ•ãƒƒã‚¯ã‚’ä½¿ã£ã¦èªè¨¼çŠ¶æ…‹ã‚’å–å¾—ã—ã€UIã‚’å‹•çš„ã«åˆ‡ã‚Šæ›¿ãˆã‚‹æ–¹æ³•ã‚’å­¦ã‚“ã ã€‚</li>
<li><code>signOut()</code>é–¢æ•°ã§ãƒ­ã‚°ã‚¢ã‚¦ãƒˆå‡¦ç†ã‚’å®Ÿè£…ã—ãŸã€‚</li>
</ul>
<p>ã“ã‚Œã§ã€Laravelã¨Next.jsã‚’é€£æºã•ã›ãŸã€æœ¬æ ¼çš„ãªèªè¨¼æ©Ÿèƒ½ãŒå®Œæˆã—ã¾ã—ãŸã€‚æ¬¡ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã§ã€ã“ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼å…¨ä½“ã®æµã‚Œã‚’å¾©ç¿’ã—ã¾ã—ã‚‡ã†ã€‚</p>
</div>
<div class="section-nav">
<a href="tutorial10_Laravel_x_Next.js_chapter03_èªè¨¼æ©Ÿèƒ½ã®å®Ÿè£…_10-3-2: NextAuth.jsã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—.html" class="prev">NextAuth.jsã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—</a>
<a href="tutorial10_Laravel_x_Next.js_chapter03_èªè¨¼æ©Ÿèƒ½ã®å®Ÿè£…_10-3-4: Chapter 3 ãƒãƒ³ã‚ºã‚ªãƒ³: èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹.html" class="next">Chapter 3 ãƒãƒ³ã‚ºã‚ªãƒ³: èªè¨¼æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹</a>
</div>

                </div>
            </div>
        </div>
        <footer>
            &copy; 2025 pro-contents
        </footer>
    </div>
</body>
</html>
