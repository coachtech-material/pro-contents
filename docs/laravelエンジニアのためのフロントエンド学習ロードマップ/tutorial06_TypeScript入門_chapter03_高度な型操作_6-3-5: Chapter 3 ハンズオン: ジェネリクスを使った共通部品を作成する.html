<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 3 ãƒãƒ³ã‚ºã‚ªãƒ³: ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ã£ãŸå…±é€šéƒ¨å“ã‚’ä½œæˆã™ã‚‹ | pro-contents</title>
    <meta name="description" content="ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div id="outer">
        <header>
            <h1><a href="index.html">pro-contents</a></h1>
            <p class="description">ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°æ•™æã‚³ãƒ³ãƒ†ãƒ³ãƒ„</p>
        </header>
        <div id="container">
            <aside>
                <div id="side-inner">
                    <div class="side-title">ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ä¸€è¦§</div>
<div class="side"><ul>
<li><a href="tutorial01_é–‹ç™ºç’°å¢ƒã¨Webã®åŸºç¤å›ºã‚.html">Tutorial 1: é–‹ç™ºç’°å¢ƒã¨Webã®åŸºç¤å›ºã‚</a></li>
<li><a href="tutorial02_HTML_CSSåŸºç¤.html">Tutorial 2: HTML/CSSåŸºç¤</a></li>
<li><a href="tutorial03_Tailwind_CSSå¾¹åº•ç¿’å¾—.html">Tutorial 3: Tailwind CSSå¾¹åº•ç¿’å¾—</a></li>
<li><a href="tutorial04_JavaScript_åŸºç¤ã¨DOMæ“ä½œ.html">Tutorial 4: JavaScriptåŸºç¤ã¨DOMæ“ä½œ</a></li>
<li><a href="tutorial05_JavaScript_å¿œç”¨ã¨éåŒæœŸå‡¦ç†.html">Tutorial 5: JavaScriptå¿œç”¨ã¨éåŒæœŸå‡¦ç†</a></li>
<li><a href="tutorial06_TypeScriptå…¥é–€.html" class="current">Tutorial 6: TypeScriptå…¥é–€</a></li>
<li><a href="tutorial07_Reactå…¥é–€.html">Tutorial 7: Reactå…¥é–€</a></li>
<li><a href="tutorial08_Reactå¿œç”¨.html">Tutorial 8: Reactå¿œç”¨</a></li>
<li><a href="tutorial09_Next.js.html">Tutorial 9: Next.js</a></li>
<li><a href="tutorial10_Laravel_x_Next.js.html">Tutorial 10: Laravel Ã— Next.js</a></li>
<li><a href="tutorial11_ãƒ†ã‚¹ãƒˆ.html">Tutorial 11: ãƒ†ã‚¹ãƒˆ</a></li>
<li><a href="tutorial12_column.html">ä¸Šç´šã‚³ãƒ©ãƒ : Webãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®æ·±å±¤ç†è§£</a></li>
</ul></div>

                </div>
            </aside>
            <div id="content">
                <div class="inner">
                    <div class="breadcrumb"><a href="../index.html">ãƒ›ãƒ¼ãƒ </a><span>></span><a href="index.html">Laravelã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®ãŸã‚ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å­¦ç¿’ãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—</a><span>></span><a href="tutorial06_TypeScriptå…¥é–€.html">Tutorial 6: TypeScriptå…¥é–€</a><span>></span><a href="tutorial06_TypeScriptå…¥é–€_chapter03_é«˜åº¦ãªå‹æ“ä½œ.html">Chapter 3: é«˜åº¦ãªå‹æ“ä½œ</a><span>></span>Chapter 3 ãƒãƒ³ã‚ºã‚ªãƒ³: ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ã£ãŸå…±é€šéƒ¨å“ã‚’ä½œæˆã™ã‚‹</div>
                    <div class="section-content">
<h1 id="6-3-5">6-3-5: å®Ÿè·µ ğŸš€ ãƒãƒ£ãƒ—ã‚¿ãƒ¼ãƒãƒ³ã‚ºã‚ªãƒ³: ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ã£ãŸå…±é€šéƒ¨å“ã‚’ä½œæˆã™ã‚‹</h1>
<h2 id="_1">ğŸ¯ èª²é¡Œ</h2>
<p>ã“ã®ãƒãƒ£ãƒ—ã‚¿ãƒ¼ã§å­¦ã‚“ã ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã€Unionå‹ã€å‹ã®çµã‚Šè¾¼ã¿ã‚’é§†ä½¿ã—ã¦ã€å®Ÿå‹™ã§ã‚ˆãã‚ã‚‹ã€ŒAPIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’æ‰±ã†å…±é€šé–¢æ•°ã€ã‚’ä½œæˆã—ã¾ã—ã‚‡ã†ã€‚</p>
<p>å¤šãã®Web APIã¯ã€æˆåŠŸæ™‚ã«ã¯ãƒ‡ãƒ¼ã‚¿ã‚’ã€å¤±æ•—æ™‚ã«ã¯ã‚¨ãƒ©ãƒ¼æƒ…å ±ã‚’å«ã‚€ã€å…±é€šã®ãƒ©ãƒƒãƒ‘ãƒ¼ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’è¿”ã—ã¾ã™ã€‚ä»Šå›ã¯ã€ãã®ã‚ˆã†ãªæ§‹é€ ã‚’å‹å®‰å…¨ã«æ‰±ã†ãŸã‚ã®éƒ¨å“ã‚’ä½œæˆã—ã¾ã™ã€‚</p>
<h3 id="_2">å®Œæˆè¦ä»¶</h3>
<ol>
<li>
<p><strong>å…±é€šã®APIãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹ <code>ApiResponse&lt;T&gt;</code> ã‚’ä½œæˆã™ã‚‹ã€‚</strong></p>
<ul>
<li>æˆåŠŸãƒ¬ã‚¹ãƒãƒ³ã‚¹ <code>ApiSuccessResponse&lt;T&gt;</code> ã¨å¤±æ•—ãƒ¬ã‚¹ãƒãƒ³ã‚¹ <code>ApiErrorResponse</code> ã®Unionå‹ã¨ã™ã‚‹ã€‚</li>
<li><code>ApiSuccessResponse&lt;T&gt;</code> ã¯ã€ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ <code>T</code> ã§å—ã‘å–ã£ãŸãƒ‡ãƒ¼ã‚¿ <code>data</code> ã¨ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ <code>status: 'success'</code> ã‚’æŒã¤ã€‚</li>
<li><code>ApiErrorResponse</code> ã¯ã€ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ <code>message</code> ã¨ã€ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ <code>status: 'error'</code> ã‚’æŒã¤ã€‚</li>
</ul>
</li>
<li>
<p><strong>ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å‡¦ç†ã™ã‚‹é–¢æ•° <code>handleResponse</code> ã‚’ä½œæˆã™ã‚‹ã€‚</strong></p>
<ul>
<li>ã“ã®é–¢æ•°ã¯ <code>ApiResponse&lt;T&gt;</code> ã‚’å¼•æ•°ã«å–ã‚‹ã€‚</li>
<li><code>status</code> ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ã£ã¦å‹ã®çµã‚Šè¾¼ã¿ã‚’è¡Œã†ã€‚</li>
<li>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒ <code>'success'</code> ãªã‚‰ã€<code>"Success! Data: "</code> ã«ç¶šã‘ã¦ <code>data</code> ã®å†…å®¹ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã™ã‚‹ã€‚</li>
<li>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ãŒ <code>'error'</code> ãªã‚‰ã€<code>"Error! Message: "</code> ã«ç¶šã‘ã¦ <code>message</code> ã‚’ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«å‡ºåŠ›ã™ã‚‹ã€‚</li>
</ul>
</li>
</ol>
<h2 id="_3">ğŸ› ï¸ æ‰‹é †</h2>
<ol>
<li><strong>å‹ã®å®šç¾©</strong>: ã¾ãšã€<code>ApiSuccessResponse&lt;T&gt;</code> ã¨ <code>ApiErrorResponse</code> ã®2ã¤ã® <code>interface</code> (ã¾ãŸã¯ <code>type</code>) ã‚’å®šç¾©ã—ã¾ã™ã€‚</li>
<li><strong>Unionå‹ã®ä½œæˆ</strong>: <code>ApiResponse&lt;T&gt;</code> ã‚’ã€ä¸Šè¨˜2ã¤ã®å‹ã®Unionå‹ã¨ã—ã¦ <code>type</code> ã‚¨ã‚¤ãƒªã‚¢ã‚¹ã§å®šç¾©ã—ã¾ã™ã€‚</li>
<li><strong>é–¢æ•°ã®å®Ÿè£…</strong>: <code>handleResponse</code> é–¢æ•°ã‚’ã‚¸ã‚§ãƒãƒªãƒƒã‚¯é–¢æ•°ã¨ã—ã¦å®Ÿè£…ã—ã¾ã™ã€‚é–¢æ•°ã®å†…éƒ¨ã§ <code>if</code> æ–‡ã‚’ä½¿ã„ã€<code>response.status</code> ã®å€¤ã«å¿œã˜ã¦å‡¦ç†ã‚’åˆ†å²ã•ã›ã¾ã™ã€‚</li>
<li><strong>å‹•ä½œç¢ºèª</strong>: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã¨å•†å“ãƒ‡ãƒ¼ã‚¿ã‚’æ¨¡ã—ãŸã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’ä½œæˆã—ã€<code>handleResponse</code> é–¢æ•°ã‚’æˆåŠŸã‚±ãƒ¼ã‚¹ã¨å¤±æ•—ã‚±ãƒ¼ã‚¹ã§ãã‚Œãã‚Œå‘¼ã³å‡ºã—ã€æœŸå¾…é€šã‚Šã®å‡ºåŠ›ãŒå¾—ã‚‰ã‚Œã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚</li>
</ol>
<h2 id="_4">ğŸ† è§£ç­”ä¾‹</h2>
<pre class="codehilite"><code class="language-typescript">// 1. å‹ã®å®šç¾©

// æˆåŠŸæ™‚ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹ã€‚ãƒ‡ãƒ¼ã‚¿éƒ¨åˆ†ã‚’ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹Tã§å—ã‘å–ã‚‹
interface ApiSuccessResponse&lt;T&gt; {
  status: 'success';
  data: T;
}

// å¤±æ•—æ™‚ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹
interface ApiErrorResponse {
  status: 'error';
  message: string;
}

// 2. Unionå‹ã®ä½œæˆ
type ApiResponse&lt;T&gt; = ApiSuccessResponse&lt;T&gt; | ApiErrorResponse;

// 3. ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚’å‡¦ç†ã™ã‚‹ã‚¸ã‚§ãƒãƒªãƒƒã‚¯é–¢æ•°ã®å®Ÿè£…
function handleResponse&lt;T&gt;(response: ApiResponse&lt;T&gt;): void {
  // `status`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å€¤ã«åŸºã¥ã„ã¦å‹ã‚’çµã‚Šè¾¼ã‚€ (Discriminated Unions)
  if (response.status === 'success') {
    // ã“ã®ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã¯ã€responseã¯ `ApiSuccessResponse&lt;T&gt;` å‹ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹
    console.log(&quot;Success! Data:&quot;, response.data);
  } else {
    // ã“ã®ãƒ–ãƒ­ãƒƒã‚¯å†…ã§ã¯ã€responseã¯ `ApiErrorResponse` å‹ã¨ã—ã¦æ‰±ã‚ã‚Œã‚‹
    console.log(&quot;Error! Message:&quot;, response.message);
  }
}

// 4. å‹•ä½œç¢ºèª

// --- ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ ---
interface User {
  id: number;
  name: string;
}

interface Product {
  id: string;
  name: string;
  price: number;
}

// --- æˆåŠŸã‚±ãƒ¼ã‚¹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ---
const userResponse: ApiResponse&lt;User&gt; = {
  status: 'success',
  data: { id: 1, name: 'Taro Yamada' }
};

const productResponse: ApiResponse&lt;Product&gt; = {
  status: 'success',
  data: { id: 'abc-123', name: 'Laptop', price: 150000 }
};

// --- å¤±æ•—ã‚±ãƒ¼ã‚¹ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ ---
const errorResponse: ApiResponse&lt;never&gt; = { // ãƒ‡ãƒ¼ã‚¿ãŒãªã„ã®ã§neverã‚’æŒ‡å®š
  status: 'error',
  message: 'Could not fetch data from the server.'
};

console.log(&quot;--- Handling User Response ---&quot;);
handleResponse(userResponse);

console.log(&quot;\n--- Handling Product Response ---&quot;);
handleResponse(productResponse);

console.log(&quot;\n--- Handling Error Response ---&quot;);
handleResponse(errorResponse);

/*
--- æœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ› ---

--- Handling User Response ---
Success! Data: { id: 1, name: 'Taro Yamada' }

--- Handling Product Response ---
Success! Data: { id: 'abc-123', name: 'Laptop', price: 150000 }

--- Handling Error Response ---
Error! Message: Could not fetch data from the server.

*/
</code></pre>

<h3 id="discriminated-unions">ğŸ’¡ ã‚³ãƒ¼ãƒ‰ã®ãƒã‚¤ãƒ³ãƒˆ: Discriminated Unions</h3>
<p>ã“ã®ãƒãƒ³ã‚ºã‚ªãƒ³ã§ä½¿ã£ãŸ <code>status</code> ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®ã‚ˆã†ã«ã€Unionå‹ã®å„ãƒ¡ãƒ³ãƒãƒ¼ãŒå…±é€šã—ã¦æŒã¤ãƒªãƒ†ãƒ©ãƒ«å‹ï¼ˆã“ã“ã§ã¯ <code>'success'</code> ã¨ <code>'error'</code>ï¼‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯ã€<strong>Discriminated Unionï¼ˆåˆ¤åˆ¥å¯èƒ½ãªåˆä½µå‹ï¼‰</strong> ã¨å‘¼ã°ã‚Œã¾ã™ã€‚ã“ã‚Œã‚’ä½¿ã†ã“ã¨ã§ã€TypeScriptã¯ <code>if</code> æ–‡ã‚„ <code>switch</code> æ–‡ã§éå¸¸ã«åŠ¹ç‡çš„ã‹ã¤ç¢ºå®Ÿã«å‹ã‚’çµã‚Šè¾¼ã‚€ã“ã¨ãŒã§ãã¾ã™ã€‚ã“ã‚Œã¯å®Ÿå‹™ã§é »ç¹ã«ä½¿ã‚ã‚Œã‚‹ã€æ¥µã‚ã¦é‡è¦ãªãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã™ã€‚</p>
</div>
<div class="section-nav">
<a href="tutorial06_TypeScriptå…¥é–€_chapter03_é«˜åº¦ãªå‹æ“ä½œ_6-3-4: ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®åŸºæœ¬.html" class="prev">ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã®åŸºæœ¬</a>
<span></span>
</div>

                </div>
            </div>
        </div>
        <footer>
            &copy; 2025 pro-contents
        </footer>
    </div>
</body>
</html>
