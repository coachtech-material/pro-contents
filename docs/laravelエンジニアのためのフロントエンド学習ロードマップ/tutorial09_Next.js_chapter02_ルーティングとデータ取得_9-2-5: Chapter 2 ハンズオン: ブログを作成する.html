<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 2 ハンズオン: ブログを作成する | pro-contents</title>
    <meta name="description" content="Pro生用プログラミング教材コンテンツ">
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <div id="outer">
        <header>
            <h1><a href="index.html">pro-contents</a></h1>
            <p class="description">Pro生用プログラミング教材コンテンツ</p>
        </header>
        <div id="container">
            <aside>
                <div id="side-inner">
                    <div class="side-title">チュートリアル一覧</div>
<div class="side"><ul>
<li><a href="tutorial01_開発環境とWebの基礎固め.html">Tutorial 1: 開発環境とWebの基礎固め</a></li>
<li><a href="tutorial02_HTML_CSS基礎.html">Tutorial 2: HTML/CSS基礎</a></li>
<li><a href="tutorial03_Tailwind_CSS徹底習得.html">Tutorial 3: Tailwind CSS徹底習得</a></li>
<li><a href="tutorial04_JavaScript_基礎とDOM操作.html">Tutorial 4: JavaScript基礎とDOM操作</a></li>
<li><a href="tutorial05_JavaScript_応用と非同期処理.html">Tutorial 5: JavaScript応用と非同期処理</a></li>
<li><a href="tutorial06_TypeScript入門.html">Tutorial 6: TypeScript入門</a></li>
<li><a href="tutorial07_React入門.html">Tutorial 7: React入門</a></li>
<li><a href="tutorial08_React応用.html">Tutorial 8: React応用</a></li>
<li><a href="tutorial09_Next.js.html" class="current">Tutorial 9: Next.js</a></li>
<li><a href="tutorial10_Laravel_x_Next.js.html">Tutorial 10: Laravel × Next.js</a></li>
<li><a href="tutorial11_テスト.html">Tutorial 11: テスト</a></li>
<li><a href="tutorial12_column.html">上級コラム: Webレンダリングの深層理解</a></li>
</ul></div>

                </div>
            </aside>
            <div id="content">
                <div class="inner">
                    <div class="breadcrumb"><a href="../index.html">ホーム</a><span>></span><a href="index.html">Laravelエンジニアのためのフロントエンド学習ロードマップ</a><span>></span><a href="tutorial09_Next.js.html">Tutorial 9: Next.js</a><span>></span><a href="tutorial09_Next.js_chapter02_ルーティングとデータ取得.html">Chapter 2: ルーティングとデータ取得</a><span>></span>Chapter 2 ハンズオン: ブログを作成する</div>
                    <div class="section-content">
<h1 id="9-2-5-chapter-2">9-2-5: 実践 🚀 Chapter 2 ハンズオン: ブログを作成する</h1>
<h2 id="_1">🎯 このハンズオンの目的</h2>
<p>このチャプターで学んだApp Routerの主要な機能を総動員して、シンプルなブログアプリケーションを構築します。具体的には、以下の要素をすべて統合します。</p>
<ul>
<li><strong>ファイルベースルーティング</strong>: ブログのトップページ (<code>/blog</code>) を作成する。</li>
<li><strong>動的ルーティング</strong>: 個別の記事ページ (<code>/blog/[slug]</code>) を作成する。</li>
<li><strong>データ取得</strong>: <code>fetch</code>を使って、ダミーAPIからブログ記事のデータを取得する。</li>
<li><strong>Loading UI</strong>: データ取得中に表示されるローディング状態を<code>loading.tsx</code>で実装する。</li>
<li><strong>Error UI</strong>: データ取得失敗時に表示されるエラー状態を<code>error.tsx</code>で実装する。</li>
</ul>
<p>このハンズオンを通して、Next.js App Routerにおける基本的なページの作成からデータ連携、状態管理までの一連の流れを実践的に習得します。</p>
<h2 id="_2">事前準備</h2>
<ul>
<li>Next.jsプロジェクトがセットアップされていること。</li>
<li>ダミーデータとして、<a href="https://jsonplaceholder.typicode.com/">JSONPlaceholder</a> の <code>/posts</code> エンドポイントを利用します。</li>
</ul>
<h2 id="_3">ハンズオン</h2>
<h3 id="1">ステップ1: ブログ一覧ページの作成</h3>
<p>まず、すべてのブログ記事のタイトルを一覧表示するページ <code>/blog</code> を作成します。</p>
<ol>
<li><code>app</code>ディレクトリ内に<code>blog</code>という名前のフォルダを作成します。</li>
<li><code>app/blog/</code>内に<code>page.tsx</code>ファイルを作成し、以下のコードを記述します。</li>
</ol>
<pre class="codehilite"><code class="language-tsx">// app/blog/page.tsx
import Link from &quot;next/link&quot;;

interface Post {
  id: number;
  title: string;
}

async function getPosts() {
  const res = await fetch(&quot;https://jsonplaceholder.typicode.com/posts&quot;, {
    // ISR: 60秒ごとに再検証
    next: { revalidate: 60 },
  });

  if (!res.ok) {
    throw new Error(&quot;Failed to fetch posts&quot;);
  }

  return res.json();
}

export default async function BlogPage() {
  const posts: Post[] = await getPosts();

  return (
    &lt;div&gt;
      &lt;h1&gt;Blog&lt;/h1&gt;
      &lt;ul&gt;
        {posts.map((post) =&gt; (
          &lt;li key={post.id}&gt;
            &lt;Link href={`/blog/${post.id}`}&gt;{post.title}&lt;/Link&gt;
          &lt;/li&gt;
        ))}
      &lt;/ul&gt;
    &lt;/div&gt;
  );
}
</code></pre>

<p><strong>ポイント</strong>:<br />
-   ページコンポーネントを<code>async</code>関数にし、直接データを<code>fetch</code>しています。<br />
-   取得した記事一覧を<code>map</code>でループし、各記事へのリンクを<code>next/link</code>で作成しています。リンク先は<code>/blog/記事のID</code>という動的なパスになっています。<br />
-   ISR（Incremental Static Regeneration）を有効にするため、<code>revalidate: 60</code>を設定しています。</p>
<h3 id="2-ui">ステップ2: ローディングとエラーUIの追加</h3>
<p>データ取得中とエラー発生時のUIを、<code>loading.tsx</code>と<code>error.tsx</code>を使って作成します。</p>
<ol>
<li><code>app/blog/</code>内に<code>loading.tsx</code>を作成します。</li>
</ol>
<pre class="codehilite"><code class="language-tsx">// app/blog/loading.tsx
export default function Loading() {
  return &lt;div&gt;Loading posts...&lt;/div&gt;;
}
</code></pre>

<ol>
<li><code>app/blog/</code>内に<code>error.tsx</code>を作成します。</li>
</ol>
<pre class="codehilite"><code class="language-tsx">// app/blog/error.tsx
&quot;use client&quot;;

export default function Error({ error, reset }: { error: Error; reset: () =&gt; void }) {
  return (
    &lt;div&gt;
      &lt;h2&gt;Something went wrong while fetching posts!&lt;/h2&gt;
      &lt;button onClick={() =&gt; reset()}&gt;Try again&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>

<p>これで、<code>/blog</code>にアクセスした際に、データ取得中は「Loading posts...」と表示され、APIリクエストが失敗した場合はエラーメッセージと再試行ボタンが表示されるようになります。</p>
<h3 id="3">ステップ3: ブログ記事詳細ページの作成</h3>
<p>次に、動的ルーティングを使って、個別のブログ記事を表示するページ <code>/blog/[id]</code> を作成します。</p>
<ol>
<li><code>app/blog/</code>内に<code>[id]</code>という名前のフォルダを作成します。（<code>[slug]</code>でも良いですが、今回はIDを使うので<code>[id]</code>とします）</li>
<li><code>app/blog/[id]/</code>内に<code>page.tsx</code>ファイルを作成し、以下のコードを記述します。</li>
</ol>
<pre class="codehilite"><code class="language-tsx">// app/blog/[id]/page.tsx

interface Post {
  id: number;
  title: string;
  body: string;
}

async function getPost(id: string) {
  const res = await fetch(`https://jsonplaceholder.typicode.com/posts/${id}`, {
    next: { revalidate: 60 },
  });

  if (!res.ok) {
    throw new Error(&quot;Failed to fetch post&quot;);
  }

  return res.json();
}

export default async function PostDetailPage({ params }: { params: { id: string } }) {
  const post: Post = await getPost(params.id);

  return (
    &lt;div&gt;
      &lt;h1&gt;{post.title}&lt;/h1&gt;
      &lt;p&gt;{post.body}&lt;/p&gt;
    &lt;/div&gt;
  );
}
</code></pre>

<p><strong>ポイント</strong>:<br />
-   フォルダ名を<code>[id]</code>とすることで、URLの<code>/blog/</code>に続く部分が<code>id</code>というパラメータとしてコンポーネントに渡されます。<br />
-   <code>params.id</code>を使って、特定のIDの記事データを取得するAPIを叩いています。</p>
<h3 id="4-ui">ステップ4: 詳細ページのローディングとエラーUI</h3>
<p>一覧ページと同様に、詳細ページにもローディングとエラーのUIを追加しましょう。</p>
<ol>
<li><code>app/blog/[id]/</code>内に<code>loading.tsx</code>を作成します。</li>
</ol>
<pre class="codehilite"><code class="language-tsx">// app/blog/[id]/loading.tsx
export default function Loading() {
  return &lt;div&gt;Loading single post...&lt;/div&gt;;
}
</code></pre>

<ol>
<li><code>app/blog/[id]/</code>内に<code>error.tsx</code>を作成します。</li>
</ol>
<pre class="codehilite"><code class="language-tsx">// app/blog/[id]/error.tsx
&quot;use client&quot;;

export default function Error({ error, reset }: { error: Error; reset: () =&gt; void }) {
  return (
    &lt;div&gt;
      &lt;h2&gt;Could not load the post.&lt;/h2&gt;
      &lt;button onClick={() =&gt; reset()}&gt;Try again&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre>

<h3 id="5">ステップ5: 動作確認</h3>
<p>アプリケーションを起動し、以下のパスにアクセスして動作を確認してみましょう。</p>
<ol>
<li><code>/blog</code>にアクセスします。<ul>
<li>一瞬「Loading posts...」と表示された後、ブログ記事のタイトル一覧が表示されるはずです。</li>
</ul>
</li>
<li>一覧からいずれかの記事タイトルをクリックします。<ul>
<li><code>/blog/1</code>のようなURLに遷移します。</li>
<li>一瞬「Loading single post...」と表示された後、記事のタイトルと本文が表示されるはずです。</li>
</ul>
</li>
</ol>
<h2 id="_4">✨ まとめ</h2>
<p>このハンズオンを通じて、Next.js App Routerの基本的な機能を一通り体験しました。</p>
<ul>
<li><code>app/blog/page.tsx</code>で記事一覧ページを<strong>ファイルベースで作成</strong>しました。</li>
<li><code>app/blog/[id]/page.tsx</code>で記事詳細ページを<strong>動的ルーティングで作成</strong>しました。</li>
<li>両方のページで、Server Components内での<code>async/await</code>を使った<strong>データ取得</strong>を行いました。</li>
<li><code>loading.tsx</code>と<code>error.tsx</code>をそれぞれの階層に配置することで、<strong>宣言的なローディング/エラーハンドリング</strong>を実現しました。</li>
</ul>
<p>これらの機能を組み合わせることで、非常に少ないコードで、パフォーマンスが高く、堅牢なWebアプリケーションを構築できることが体感できたはずです。この基本パターンは、あらゆる種類のデータ駆動型アプリケーションに応用できます。</p>
</div>
<div class="section-nav">
<a href="tutorial09_Next.js_chapter02_ルーティングとデータ取得_9-2-4: Loading UIとError UI.html" class="prev">Loading UIとError UI</a>
<span></span>
</div>

                </div>
            </div>
        </div>
        <footer>
            &copy; 2025 pro-contents
        </footer>
    </div>
</body>
</html>
