# 4-1-5: 繰り返し処理（for, for...of）

## Chapter 1: JavaScriptの基礎

### Section 5: 繰り返し処理（for, for...of）

🎯 **このセクションで学ぶこと**

-   `for`ループを使い、指定した回数だけ処理を繰り返せるようになる。
-   `for...of`ループを使い、配列などのコレクションの各要素に対して処理を行えるようになる。
-   `break`と`continue`を使い、ループの挙動を制御できるようになる。

--- 

### イントロダクション：退屈な作業はコンピュータに任せよう

プログラミングの大きな強みの一つは、人間がやると退屈で時間のかかる反復作業を、一瞬で正確に実行できることです。例えば、「1から100までの数字をコンソールに表示する」という作業を、`console.log(1)`, `console.log(2)`...と100行書くのは非現実的です。

このような繰り返し処理を実現するのが**ループ（繰り返し）構文**です。このセクションでは、JavaScriptで最もよく使われる2つのループ構文、伝統的な`for`ループと、よりモダンで便利な`for...of`ループを学びます。これらもPHPの`for`や`foreach`と非常によく似ているため、概念はすぐに掴めるはずです。

--- 

### ⚙️ 1. `for`ループ：指定回数繰り返す

`for`ループは、特定の回数だけ処理を繰り返したい場合に最もよく使われる、古典的なループ構文です。PHPの`for`ループと構文は全く同じです。

**基本構文:**
```javascript
for (初期化式; 条件式; 増減式) {
  // 繰り返したい処理
}
```

-   **初期化式:** ループが始まる前に一度だけ実行されます。通常、カウンター変数を初期化します（例: `let i = 0`）。
-   **条件式:** 各ループの反復が始まる前に評価されます。この式が`true`である限り、ループは続行されます。
-   **増減式:** 各ループの反復が終わるたびに実行されます。通常、カウンター変数をインクリメント（`i++`）またはデクリメント（`i--`）します。

**例：1から5までの数字を表示する**
```javascript
for (let i = 1; i <= 5; i++) {
  console.log(i);
}
// 出力:
// 1
// 2
// 3
// 4
// 5
```

**例：配列の要素を順番に表示する**
```javascript
const fruits = ["りんご", "バナナ", "みかん"];

for (let i = 0; i < fruits.length; i++) {
  console.log(fruits[i]);
}
// 出力:
// "りんご"
// "バナナ"
// "みかん"
```

--- 

### ⚙️ 2. `for...of`ループ：配列の要素を一つずつ取り出す

`for`ループでも配列を扱うことはできますが、カウンター変数`i`を管理する必要があり、少し冗長です。よりモダンで直感的に配列の要素をループ処理できるのが`for...of`ループです。これはPHPの`foreach`ループに非常に似ています。

**基本構文:**
```javascript
for (const 要素 of イテラブルオブジェクト) {
  // 各要素に対して行いたい処理
}
```

-   **イテラブルオブジェクト:** 配列や文字列など、反復可能なオブジェクト。
-   **要素:** ループの各反復で、オブジェクトから取り出された要素が格納される変数。

**例：配列の要素を順番に表示する**
```javascript
const fruits = ["りんご", "バナナ", "みかん"];

for (const fruit of fruits) {
  console.log(fruit);
}
// 出力:
// "りんご"
// "バナナ"
// "みかん"
```

`for`ループの例と比べて、はるかにシンプルで読みやすいことがわかります。カウンター変数`i`や配列の長さを気にする必要がありません。

**配列の要素を扱う場合は、原則として`for...of`ループを使うのが良いプラクティスです。**

> **補足: `for...in`ループとの違い**
> JavaScriptには`for...in`という別のループ構文もありますが、これは主にオブジェクトのプロパティキーを列挙するためのもので、配列に対して使うと予期せぬ挙動をすることがあります。配列のループには`for...of`を使う、と覚えておきましょう。

--- 

### ⚙️ 3. ループの制御：`break`と`continue`

ループの途中で処理を中断したり、次の反復にスキップしたりしたい場合があります。そのために`break`と`continue`を使います。

-   **`break`**: ループを完全に**中断**し、ループ構文の直後の処理に進みます。

**例：配列から特定の値を見つけたらループを終了する**
```javascript
const numbers = [1, 5, 10, 15, 20];

for (const num of numbers) {
  if (num === 10) {
    console.log("10を見つけました！");
    break; // ループを終了
  }
  console.log(num); // 10に到達するまで実行される
}
// 出力:
// 1
// 5
// "10を見つけました！"
```

-   **`continue`**: 現在の反復処理を**中断**し、ループの**次の反復**に進みます。

**例：偶数だけをスキップして表示する**
```javascript
for (let i = 1; i <= 10; i++) {
  if (i % 2 === 0) {
    continue; // 偶数の場合は、この後のconsole.logをスキップして次のループへ
  }
  console.log(i);
}
// 出力:
// 1
// 3
// 5
// 7
// 9
```

--- 

✨ **まとめ**

-   `for`ループは、カウンター変数を使って指定した回数だけ処理を繰り返す伝統的な方法である。
-   `for...of`ループは、配列などの要素を一つずつ取り出して処理するための、よりモダンで推奨される方法である。
-   `break`はループを完全に終了させ、`continue`は現在の反復をスキップして次に進む。

📝 **学習のポイント**

-   [ ] 配列`const colors = ["red", "green", "blue"]`の各要素を、`for`ループと`for...of`ループの両方を使ってコンソールに出力するコードを書いてみてください。
-   [ ] 1から20までの数字をループで処理し、3の倍数のときだけ`"Fizz"`と表示する（それ以外の数字は表示しない）コードを`continue`を使って書いてみてください。
-   [ ] PHPの`foreach ($array as $key => $value)`のように、`for...of`ループで配列のインデックス番号も同時に取得するにはどうすればよいか、調べてみましょう。（ヒント: `Array.prototype.entries()`）
