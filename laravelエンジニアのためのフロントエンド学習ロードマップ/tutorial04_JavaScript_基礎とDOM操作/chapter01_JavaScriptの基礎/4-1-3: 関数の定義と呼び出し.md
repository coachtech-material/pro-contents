# 4-1-3: 関数の定義と呼び出し

## 🎯 このセクションで学ぶこと

- 関数の基本的な定義方法と呼び出し方を理解する
- 引数と戻り値の使い方を学ぶ
- アロー関数の書き方を習得する

## はじめに

関数は、一連の処理をまとめて名前を付けたものです。同じ処理を何度も書く代わりに、関数として定義しておけば、必要なときに呼び出すだけで済みます。これにより、コードの再利用性が高まり、保守しやすくなります。

## 1. 関数の基本的な定義

JavaScriptで関数を定義するには、`function`キーワードを使います。

```javascript
// 関数の定義
function greet() {
  console.log("こんにちは！");
}

// 関数の呼び出し
greet(); // "こんにちは！"
greet(); // "こんにちは！"（何度でも呼び出せる）
```

## 2. 引数（パラメータ）

関数に値を渡すには、引数を使います。引数は関数の括弧内に定義します。

```javascript
// 引数を1つ受け取る関数
function greet(name) {
  console.log(`こんにちは、${name}さん！`);
}

greet("太郎"); // "こんにちは、太郎さん！"
greet("花子"); // "こんにちは、花子さん！"

// 複数の引数を受け取る関数
function add(a, b) {
  console.log(a + b);
}

add(3, 5); // 8
add(10, 20); // 30
```

## 3. 戻り値（return）

関数から値を返すには、`return`文を使います。

```javascript
// 戻り値を返す関数
function add(a, b) {
  return a + b;
}

const result = add(3, 5);
console.log(result); // 8

// 戻り値を直接使う
console.log(add(10, 20)); // 30

// 計算結果を別の計算に使う
const total = add(100, 200) + add(50, 50);
console.log(total); // 400
```

`return`文が実行されると、関数の処理はそこで終了します。

```javascript
function checkAge(age) {
  if (age < 0) {
    return "無効な年齢です";
  }
  if (age >= 20) {
    return "成人です";
  }
  return "未成年です";
}

console.log(checkAge(25)); // "成人です"
console.log(checkAge(15)); // "未成年です"
console.log(checkAge(-5)); // "無効な年齢です"
```

## 4. アロー関数

ES6から導入されたアロー関数は、より短い構文で関数を定義できます。

```javascript
// 従来の関数
function add(a, b) {
  return a + b;
}

// アロー関数
const add = (a, b) => {
  return a + b;
};

// 処理が1行の場合は、さらに短く書ける
const add = (a, b) => a + b;

// 引数が1つの場合は、括弧も省略できる
const double = x => x * 2;

console.log(add(3, 5)); // 8
console.log(double(4)); // 8
```

### 従来の関数とアロー関数の比較

| 特徴 | function | アロー関数 |
|------|----------|-----------|
| 構文 | `function name() {}` | `const name = () => {}` |
| thisの扱い | 呼び出し元に依存 | 定義時のthisを保持 |
| 主な用途 | メソッド定義、コンストラクタ | コールバック関数、短い処理 |

## 5. デフォルト引数

引数にデフォルト値を設定できます。引数が渡されなかった場合、デフォルト値が使われます。

```javascript
function greet(name = "ゲスト") {
  console.log(`こんにちは、${name}さん！`);
}

greet("太郎"); // "こんにちは、太郎さん！"
greet();       // "こんにちは、ゲストさん！"

// アロー関数でも同様
const multiply = (a, b = 1) => a * b;

console.log(multiply(5, 3)); // 15
console.log(multiply(5));    // 5
```

## 6. スコープの基本

関数内で定義した変数は、関数の外からはアクセスできません。これを「スコープ」と呼びます。

```javascript
function example() {
  const message = "関数内の変数";
  console.log(message); // OK
}

example();
// console.log(message); // エラー！関数外からはアクセスできない

// グローバル変数は関数内からアクセスできる
const globalMessage = "グローバル変数";

function showMessage() {
  console.log(globalMessage); // OK
}

showMessage(); // "グローバル変数"
```

## ✨ まとめ

関数は、処理をまとめて再利用可能にする重要な機能です。`function`キーワードまたはアロー関数で定義し、引数で値を受け取り、`return`で値を返すことができます。アロー関数は短い構文で書けるため、コールバック関数などでよく使われます。

次のセクションでは、演算子について学んでいきましょう。
